{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/cross-icon.svg","../src/img/cross.svg","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\nexport async function getPhotos(q, p) {\n\n  const BASE_URL = 'https://pixabay.com/api/?';\n  const params = {\n    key: '44040237-e4cc253c6c6f225197cba954d',\n    q: q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: p,\n  };\n\n  return axios.get(BASE_URL, {params});\n}\n","'use strict';\n\nexport function render(picsArr) {\n  return picsArr.map(makePic).join('');\n\n  function makePic(picObj) {\n    return `<li class=\"card\">\n                <a href=\"${picObj.largeImageURL}\">\n                <div class=\"img-wrapper\">\n                <img src=\"${picObj.webformatURL}\" alt=\"${picObj.tags}\">\n                </div>\n                </a>\n            <table>\n                <tr>\n                    <th>Likes</th>\n                    <th>Views</th>\n                    <th>Comments</th>\n                    <th>Downloads</th>\n                </tr>\n                <tr>\n                    <td>${picObj.likes}</td>\n                    <td>${picObj.views}</td>\n                    <td>${picObj.comments}</td>\n                    <td>${picObj.downloads}</td>\n                </tr>\n            </table>\n        </li>`;\n  }\n}\n","export default \"__VITE_ASSET__881c4ee8__\"","export default \"__VITE_ASSET__44adbf13__\"","'use strict';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { render } from './js/render-functions';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport errIcon from './img/cross-icon.svg';\nimport closeIcon from './img/cross.svg';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst loader = document.querySelector('.loader-wrapper');\nconst moreBtn = document.querySelector('.load-more');\nmoreBtn.addEventListener('click', loadMore);\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nform.addEventListener('submit', onSubmit);\n\nlet userQuery = '';\nlet page = 1;\n\nfunction onSubmit(evt) {\n  evt.preventDefault();\n  gallery.innerHTML = '';\n  hideElem(moreBtn);\n  page = 1;\n  userQuery = form.querySelector('input').value;\n  if (userQuery === '') return;\n  buildGallery();\n}\n\nasync function buildGallery() {\n  hideElem(moreBtn);\n  showElem(loader);\n  try {\n    const { data } = await getPhotos(userQuery, page);\n    if (data.hits.length === 0) {\n      showRedToast();\n    } else {\n      gallery.insertAdjacentHTML('beforeend', render(data.hits));\n      lightbox.refresh();\n      if (data.totalHits > page * 15) {\n        showElem(moreBtn);\n      } else {\n        showToastThatsIt();\n      }\n    }\n  } catch (err) {\n    showRedToast();\n  }\n  hideElem(loader);\n}\n\nasync function loadMore() {\n  const lastPic = document.querySelector('.gallery > li:last-child');\n  const scrolDist = Math.ceil(lastPic.getBoundingClientRect().bottom);\n  \n  page += 1;\n  await buildGallery();\n\n  window.scrollBy({\n    top: scrolDist,\n    behavior: \"smooth\",\n  });\n\n}\nfunction showElem(elem) {\n  elem.setAttribute('style', 'display: flex;');\n}\nfunction hideElem(elem) {\n  elem.setAttribute('style', 'display: none;');\n}\nfunction showToast(text, color, icon) {\n  iziToast.show({\n    title: text,\n    backgroundColor: color,\n    timeout: 5000,\n    titleColor: '#fff',\n    titleSize: '16px',\n    iconUrl: icon,\n    buttons: [\n      [\n        `<button style=\"background: transparent; padding: 0; margin-left: 30px\" width=\"20\" height=\"20\"><img src=${closeIcon}></button>`,\n        function (instance, toast) {\n          instance.hide(\n            {\n              transitionOut: 'fadeOutUp',\n            },\n            toast,\n            'buttonName'\n          );\n        },\n      ],\n    ],\n    close: false,\n  });\n}\nfunction showRedToast() {\n  const text = `Sorry, there are no images matching<br>your search query. Please, try again!`;\n  const color = '#EF4040';\n  const icon = errIcon;\n  showToast(text, color, icon);\n}\nfunction showToastThatsIt() {\n  const text = `No more photos found`;\n  const color = '#FFA000';\n  const icon = '';\n  showToast(text, color, icon);\n}"],"names":["getPhotos","q","p","BASE_URL","params","axios","render","picsArr","makePic","picObj","errIcon","closeIcon","lightbox","SimpleLightbox","loader","moreBtn","loadMore","gallery","form","onSubmit","userQuery","page","evt","hideElem","buildGallery","showElem","data","showRedToast","showToastThatsIt","lastPic","scrolDist","elem","showToast","text","color","icon","iziToast","instance","toast"],"mappings":"owBAIO,eAAeA,EAAUC,EAAGC,EAAG,CAEpC,MAAMC,EAAW,4BACXC,EAAS,CACb,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAMC,CACV,EAEE,OAAOG,EAAM,IAAIF,EAAU,CAAC,OAAAC,CAAM,CAAC,CACrC,CChBO,SAASE,EAAOC,EAAS,CAC9B,OAAOA,EAAQ,IAAIC,CAAO,EAAE,KAAK,EAAE,EAEnC,SAASA,EAAQC,EAAQ,CACvB,MAAO;AAAA,2BACgBA,EAAO,aAAa;AAAA;AAAA,4BAEnBA,EAAO,YAAY,UAAUA,EAAO,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAW1CA,EAAO,KAAK;AAAA,0BACZA,EAAO,KAAK;AAAA,0BACZA,EAAO,QAAQ;AAAA,0BACfA,EAAO,SAAS;AAAA;AAAA;AAAA,cAIvC,CACH,CC5BA,MAAeC,EAAA,gDCAAC,EAAA,2CCcTC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAU,SAAS,cAAc,YAAY,EACnDA,EAAQ,iBAAiB,QAASC,CAAQ,EAC1C,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAQ,EAExC,IAAIC,EAAY,GACZC,EAAO,EAEX,SAASF,EAASG,EAAK,CACrBA,EAAI,eAAc,EAClBL,EAAQ,UAAY,GACpBM,EAASR,CAAO,EAChBM,EAAO,EACPD,EAAYF,EAAK,cAAc,OAAO,EAAE,MACpCE,IAAc,IAClBI,GACF,CAEA,eAAeA,GAAe,CAC5BD,EAASR,CAAO,EAChBU,EAASX,CAAM,EACf,GAAI,CACF,KAAM,CAAE,KAAAY,CAAI,EAAK,MAAM1B,EAAUoB,EAAWC,CAAI,EAC5CK,EAAK,KAAK,SAAW,EACvBC,KAEAV,EAAQ,mBAAmB,YAAaX,EAAOoB,EAAK,IAAI,CAAC,EACzDd,EAAS,QAAO,EACZc,EAAK,UAAYL,EAAO,GAC1BI,EAASV,CAAO,EAEhBa,IAGL,MAAa,CACZD,GACD,CACDJ,EAAST,CAAM,CACjB,CAEA,eAAeE,GAAW,CACxB,MAAMa,EAAU,SAAS,cAAc,0BAA0B,EAC3DC,EAAY,KAAK,KAAKD,EAAQ,sBAAqB,EAAG,MAAM,EAElER,GAAQ,EACR,MAAMG,EAAY,EAElB,OAAO,SAAS,CACd,IAAKM,EACL,SAAU,QACd,CAAG,CAEH,CACA,SAASL,EAASM,EAAM,CACtBA,EAAK,aAAa,QAAS,gBAAgB,CAC7C,CACA,SAASR,EAASQ,EAAM,CACtBA,EAAK,aAAa,QAAS,gBAAgB,CAC7C,CACA,SAASC,EAAUC,EAAMC,EAAOC,EAAM,CACpCC,EAAS,KAAK,CACZ,MAAOH,EACP,gBAAiBC,EACjB,QAAS,IACT,WAAY,OACZ,UAAW,OACX,QAASC,EACT,QAAS,CACP,CACE,0GAA0GxB,CAAS,aACnH,SAAU0B,EAAUC,EAAO,CACzBD,EAAS,KACP,CACE,cAAe,WAChB,EACDC,EACA,YACZ,CACS,CACF,CACF,EACD,MAAO,EACX,CAAG,CACH,CACA,SAASX,GAAe,CAItBK,EAHa,+EACC,UACDtB,CACc,CAC7B,CACA,SAASkB,GAAmB,CAI1BI,EAHa,uBACC,UACD,EACc,CAC7B"}